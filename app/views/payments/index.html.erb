<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Cabeçalho -->
  <div class="flex items-center justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold text-gray-900">
        Histórico de Pagamentos - <%= @client.name %>
      </h1>
      <p class="mt-2 text-sm text-gray-600">
        Todos os pagamentos registrados para este cliente
      </p>
    </div>
    <div class="flex space-x-3">
      <%= link_to client_path(@client), 
          class: "bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 flex items-center" do %>
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        Voltar
      <% end %>
      <%= link_to new_client_payment_path(@client), 
          class: "bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 flex items-center" do %>
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
        Novo Pagamento
      <% end %>
    </div>
  </div>

  <% if @payments && @payments.any? %>
    <!-- Tabela de Pagamentos -->
    <div class="bg-white shadow-md rounded-lg overflow-hidden">
      <table class="w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Data do Pagamento</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @payments.each_with_index do |payment, index| %>
            <tr class="<%= index.even? ? 'bg-white' : 'bg-gray-50' %> hover:bg-blue-50 transition duration-150">
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                <%= payment.payment_date.strftime("%d/%m/%Y") %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600">
                <%= number_to_currency(payment.value, unit: "R$ ", separator: ",", delimiter: ".") %>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <% if payment.payment_date + 1.month > Date.current %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                    Em dia
                  </span>
                <% else %>
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                    Vencido
                  </span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- Paginação -->
    <div class="mt-6 flex items-center justify-between">
      <div class="flex items-center">
        <p class="text-sm text-gray-700">
          Mostrando <span class="font-medium"><%= @payments.offset + 1 %></span> até 
          <span class="font-medium"><%= [@payments.offset + @payments.per_page, @payments.total_entries].min %></span> de 
          <span class="font-medium"><%= @payments.total_entries %></span> pagamentos
        </p>
      </div>
      <div class="pagination-wrapper">
        <%= will_paginate @payments, 
            class: "pagination",
            inner_window: 1,
            outer_window: 0,
            previous_label: "← Anterior",
            next_label: "Próximo →" %>
      </div>
    </div>
  <% else %>
    <div class="text-center py-12">
      <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
      </svg>
      <h3 class="mt-2 text-sm font-medium text-gray-900">Nenhum pagamento registrado</h3>
      <p class="mt-1 text-sm text-gray-500">Comece registrando o primeiro pagamento do cliente.</p>
      <div class="mt-6">
        <%= link_to new_client_payment_path(@client), 
            class: "bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 flex items-center mx-auto w-fit" do %>
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
          </svg>
          Novo Pagamento
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<style>
  .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
  }
  
  .pagination a, .pagination em, .pagination span {
    display: inline-flex;
    align-items: center;
    padding: 0.5rem 0.75rem;
    border: 1px solid #d1d5db;
    background-color: #ffffff;
    color: #374151;
    text-decoration: none;
    border-radius: 0.375rem;
    transition: all 0.2s;
    font-size: 0.875rem;
    font-weight: 500;
  }
  
  .pagination a:hover {
    background-color: #f3f4f6;
    border-color: #9ca3af;
  }
  
  .pagination .current {
    background-color: #3b82f6;
    border-color: #3b82f6;
    color: #ffffff;
  }
  
  .pagination .disabled {
    background-color: #f9fafb;
    border-color: #e5e7eb;
    color: #9ca3af;
  }
</style>
